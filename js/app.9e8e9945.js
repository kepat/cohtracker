(function(e){function t(t){for(var o,r,c=t[0],i=t[1],u=t[2],l=0,d=[];l<c.length;l++)r=c[l],a[r]&&d.push(a[r][0]),a[r]=0;for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o]);h&&h(t);while(d.length)d.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],o=!0,r=1;r<n.length;r++){var c=n[r];0!==a[c]&&(o=!1)}o&&(s.splice(t--,1),e=i(i.s=n[0]))}return e}var o={},r={app:0},a={app:0},s=[];function c(e){return i.p+"js/"+({routes:"routes"}[e]||e)+"."+{"chunk-2d0d63f1":"eed122ff","chunk-71d80066":"d153120c",routes:"ace3ea42"}[e]+".js"}function i(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],n={"chunk-71d80066":1,routes:1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=new Promise(function(t,n){for(var o="css/"+({routes:"routes"}[e]||e)+"."+{"chunk-2d0d63f1":"31d6cfe0","chunk-71d80066":"737f607e",routes:"f1202c36"}[e]+".css",a=i.p+o,s=document.getElementsByTagName("link"),c=0;c<s.length;c++){var u=s[c],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===o||l===a))return t()}var d=document.getElementsByTagName("style");for(c=0;c<d.length;c++){u=d[c],l=u.getAttribute("data-href");if(l===o||l===a)return t()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=t,h.onerror=function(t){var o=t&&t.target&&t.target.src||a,s=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");s.request=o,delete r[e],h.parentNode.removeChild(h),n(s)},h.href=a;var f=document.getElementsByTagName("head")[0];f.appendChild(h)}).then(function(){r[e]=0}));var o=a[e];if(0!==o)if(o)t.push(o[2]);else{var s=new Promise(function(t,n){o=a[e]=[t,n]});t.push(o[2]=s);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,i.nc&&l.setAttribute("nonce",i.nc),l.src=c(e),u=function(t){l.onerror=l.onload=null,clearTimeout(d);var n=a[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src,s=new Error("Loading chunk "+e+" failed.\n("+o+": "+r+")");s.type=o,s.request=r,n[1](s)}a[e]=void 0}};var d=setTimeout(function(){u({type:"timeout",target:l})},12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},i.m=e,i.c=o,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var h=l;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"05ea":function(e,t,n){"use strict";var o=n("8a57"),r=n.n(o);r.a},"3b05":function(e,t,n){},"41cb":function(e,t,n){"use strict";var o=n("2b0e"),r=n("8c4f"),a=n("c0d6"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-content",{staticClass:"contentGradient"},[n("div",{attrs:{id:"login"}},[n("v-form",[n("v-container",{attrs:{fluid:"","fill-height":""}},[n("v-layout",{attrs:{"justify-center":""}},[n("v-flex",{attrs:{xs12:"",sm8:"",md6:"",lg4:""}},[n("v-card",{staticClass:"elevation-1 pa-3"},[n("v-card-text",[n("div",{staticClass:"layout column align-center"},[n("img",{attrs:{src:"static/COH_Eng_Brand-300.png",alt:"Celebration of Hope",width:"180"}}),n("h1",{staticClass:"flex my-4 grey--text"},[e._v("Gather Login")])])]),n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{clearable:"","prepend-icon":"person","error-messages":e.nameerror,name:"login",label:"Username",type:"text"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{"prepend-icon":"lock","error-messages":e.passworderror,name:"password",label:"Password",id:"password",type:e.showpassword?"text":"password","append-icon":e.showpassword?"visibility":"visibility_off"},on:{"click:append":function(t){e.showpassword=!e.showpassword}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),n("v-flex",{attrs:{xs12:""}},[n("v-card-actions",[n("v-btn",{attrs:{color:"primary",flat:"",router:"",to:"/forgotpassword"}},[e._v("Forgot password")]),n("v-spacer"),n("v-btn",{attrs:{block:"",color:"primary",loading:e.loading},on:{click:e.login}},[e._v("Login")])],1)],1)],1)],1)],1)],1)],1)],1)],1)])},c=[],i=(n("a481"),n("cebc")),u=n("2f62"),l={data:function(){return{username:"",password:"",nameerror:"",passworderror:"",showpassword:!1}},computed:Object(i["a"])({},Object(u["e"])(["loading"])),methods:Object(i["a"])({},Object(u["b"])(["authUser"]),{login:function(){var e=this;this.authUser({username:this.username,password:this.password}).then(function(t){e.$router.replace("dashboard")}).catch(function(t,n){e.nameerror="Please check your name",e.passworderror="Please check your password",console.log("Error In Login,vue"),console.log(t),console.log(n)})}})},d=l,h=(n("05ea"),n("0c7c")),f=n("6544"),p=n.n(f),v=n("8336"),g=n("b0af"),m=n("99d9"),b=n("a523"),w=n("549c"),C=n("0e8f"),k=n("4bd4"),y=n("a722"),S=n("9910"),T=n("2677"),L=Object(h["a"])(d,s,c,!1,null,"58c66876",null),x=L.exports;p()(L,{VBtn:v["a"],VCard:g["a"],VCardActions:m["a"],VCardText:m["b"],VContainer:b["a"],VContent:w["a"],VFlex:C["a"],VForm:k["a"],VLayout:y["a"],VSpacer:S["a"],VTextField:T["a"]}),o["a"].use(r["a"]);var A=new r["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:x},{path:"/dashboard",props:!0,component:function(){return n.e("chunk-2d0d63f1").then(n.bind(null,"7277"))},children:[{path:"",name:"dashboard",components:{default:function(){return n.e("routes").then(n.bind(null,"26c5"))}},props:{default:!0},beforeEnter:function(e,t,n){a["a"].state.AccessToken?(a["a"].commit("setLoading",!0),"super-admin"==a["a"].state.Role?a["a"].dispatch("fetchChurches").then(function(e){a["a"].commit("setLoading",!1),n()}).catch(function(e){console.log("There was an error in fetchChurches:",e.response)}):"church-admin"==a["a"].state.Role&&(a["a"].commit("setLoading",!1),a["a"].dispatch("fetchChurches").then(function(e){a["a"].commit("setLoading",!1),n()}).catch(function(e){console.log("There was an error in fetchChurches:",e.response)}))):n(!1)}},{path:"contacts/:churchid?",components:{default:function(){return n.e("routes").then(n.bind(null,"63d8"))}},props:{default:!0},beforeEnter:function(e,t,n){a["a"].state.AccessToken?(a["a"].commit("setLoading",!0),a["a"].dispatch("fetchContacts",e.params.churchid).then(function(e){a["a"].commit("setContacts",e.data),n()}).catch(function(e){console.log("There was an error in fetchContacts:",e.response),n(!1)})):n(!1)}},{path:"contacts/history/:id?",props:{default:!0},components:{default:function(){return n.e("chunk-71d80066").then(n.bind(null,"371a"))}}}]},{path:"/changepassword",component:function(){return n.e("routes").then(n.bind(null,"f3c2"))}},{path:"/forgotpassword",component:function(){return n.e("routes").then(n.bind(null,"f243"))}},{path:"/churchadmin/:postcode?",name:"churchadmin",props:!0,beforeEnter:function(e,t,n){a["a"].state.AccessToken?(console.log("about to route"),n()):n({name:"home"})},component:function(){n.e("routes").then(n.bind(null,"84e9"))}}]});A.afterEach(function(){console.log("Route after each"),a["a"].commit("setLoading",!1)});t["a"]=A},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var o=n("2b0e"),r=n("bb71"),a=n("a722"),s=(n("b56c"),{primary:"#F26A1B",secondary:"#5C73B9",accent:"#C4E4DE",error:"#FF5252",info:"#394464",success:"#D4F4EE",warning:"#BF1F2C"});o["a"].use(r["a"],{components:{VLayout:a["a"]},theme:s,options:{customProperties:!0},iconfont:"md"});var c=n("d847"),i=n.n(c),u=n("795b"),l=n.n(u),d=n("bc3a"),h=n.n(d),f={},p=h.a.create(f);p.interceptors.request.use(function(e){return e},function(e){return l.a.reject(e)}),p.interceptors.response.use(function(e){return e},function(e){return l.a.reject(e)}),Plugin.install=function(e){e.axios=p,window.axios=p,i()(e.prototype,{axios:{get:function(){return p}},$axios:{get:function(){return p}}})},o["a"].use(Plugin);Plugin;var v=n("31bd"),g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("Navbar"),n("Drawer"),n("ContentView"),n("Snackbar"),n("Loading")],1)},m=[],b=(n("a481"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-toolbar",{staticClass:"coh-toolbar",attrs:{dark:"","clipped-left":"","clipped-right":"",fixed:"",app:""}},[e.isAuthenticated?n("v-toolbar-items",[n("v-toolbar-side-icon",{on:{click:e.onClickBtn}})],1):e._e(),n("v-toolbar-title",{staticClass:"body-2"},[e._v(e._s(e.toolbarTitle))]),n("v-spacer"),e.isAuthenticated?n("v-menu",{attrs:{transition:"slide-y-transition",dark:"","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on;return[n("span",{staticClass:"hidden-sm-and-down"},[e._v(e._s(e.FullName))]),n("v-btn",e._g({attrs:{icon:"",flat:""}},o),[n("v-icon",[e._v("more_vert")])],1)]}}],null,!1,2836302236)},[n("v-list",[n("v-subheader",{staticClass:"hidden-md-and-up",attrs:{color:"secondary darken-4"}},[n("v-list-tile-avatar",[n("v-btn",{attrs:{small:"",flat:"",icon:"",disabled:""}},[n("v-icon",[e._v("person")])],1)],1),n("v-list-tile-content",[n("v-list-tile-title",{domProps:{innerHTML:e._s(e.FullName)}})],1)],1),n("v-divider"),n("v-list-tile",{attrs:{router:"",to:"/changepassword"}},[n("v-list-tile-avatar",[n("v-btn",{attrs:{small:"",flat:"",icon:"",disabled:""}},[n("v-icon",[e._v("edit_attributes")])],1)],1),n("v-list-tile-content",[n("v-list-tile-title",[e._v("Change Password")])],1)],1),n("v-list-tile",{on:{click:function(t){return e.onLogout()}}},[n("v-list-tile-avatar",[n("v-btn",{attrs:{small:"",flat:"",icon:"",disabled:""}},[n("v-icon",[e._v("exit_to_app")])],1)],1),n("v-list-tile-content",[n("v-list-tile-title",[e._v("Logout")])],1)],1)],1)],1):e._e()],1)}),w=[],C=(n("aef6"),n("cebc")),k=n("2f62"),y={data:function(){return{responsive:!1,responsiveInput:!1}},computed:Object(C["a"])({},Object(k["c"])(["isAuthenticated","FullName"]),Object(k["e"])(["Church"]),{computeLogo:function(){return"static/COH_Eng_White-300.png"},toolbarTitle:function(){return this.$route.path.endsWith("/dashboard/")?"Church Directory":this.Church?this.Church.Name:""}}),mounted:function(){this.onResponsiveInverted(),window.addEventListener("resize",this.onResponsiveInverted)},beforeDestroy:function(){window.removeEventListener("resize",this.onResponsiveInverted)},methods:Object(C["a"])({},Object(k["b"])(["logout"]),Object(k["d"])(["setDrawer","toggleDrawer"]),{onClickBtn:function(){this.setDrawer(!this.$store.state.drawer)},onClick:function(){},onLogout:function(){this.logout(),this.setDrawer(!1),this.$router.replace("/")},onChangePassword:function(){this.setDrawer(!1),this.$router.push("/changepassword")},onResponsiveInverted:function(){window.innerWidth<991?(this.responsive=!0,this.responsiveInput=!1):(this.responsive=!1,this.responsiveInput=!0)}})},S=y,T=(n("5dfc"),n("0c7c")),L=n("6544"),x=n.n(L),A=n("8336"),_=n("ce7e6"),V=n("132d"),I=n("8860"),O=n("ba95"),j=n("c954"),D=n("5d23"),P=n("e449"),E=n("9910"),F=n("e0c7"),R=n("71d9"),B=n("2a7f"),M=n("706c"),N=Object(T["a"])(S,b,w,!1,null,null,null),$=N.exports;x()(N,{VBtn:A["a"],VDivider:_["a"],VIcon:V["a"],VList:I["a"],VListTile:O["a"],VListTileAvatar:j["a"],VListTileContent:D["a"],VListTileTitle:D["b"],VMenu:P["a"],VSpacer:E["a"],VSubheader:F["a"],VToolbar:R["a"],VToolbarItems:B["a"],VToolbarSideIcon:M["a"],VToolbarTitle:B["b"]});var U=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isAuthenticated?n("v-navigation-drawer",{staticClass:"secondary darken-1",attrs:{app:"",dark:"",clipped:"",left:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[n("v-img",{attrs:{src:e.image,height:"100%"}},[n("v-layout",{staticClass:"overlay fill-height",attrs:{tag:"v-list",column:""}},[n("v-list",[n("v-subheader",{attrs:{color:"secondary darken-4"}},[n("v-list-tile-content",{attrs:{"background-color":"primary"}},[n("v-img",{staticClass:"logo fill-height",attrs:{src:e.computeLogo,width:"80%"}})],1),n("v-divider")],1),e._l(e.links,function(t){return n("v-list-tile",{key:t.text,attrs:{router:"",to:{path:t.routename}}},[n("v-list-tile-action",[n("v-icon",{staticClass:"white--text"},[e._v(e._s(t.icon))])],1),n("v-list-tile-content",[n("v-list-tile-title",{staticClass:"white--text"},[e._v(e._s(t.text))])],1)],1)})],2)],1)],1)],1):e._e()},z=[],H={data:function(){return{links:[{icon:"dashboard",text:"Dashboard",routename:"/dashboard/"},{icon:"person",text:"Inquirers",routename:"/dashboard/contacts/"},{icon:"more",text:"Change Password",routename:"/changepassword"}]}},computed:Object(C["a"])({},Object(k["e"])(["image","color"]),Object(k["c"])(["isAuthenticated"]),{computeLogo:function(){return"static/COH_Eng_White-300.png"},drawer:{get:function(){return this.$store.state.drawer},set:function(e){this.setDrawer(e)}}}),mounted:function(){this.onResponsiveInverted(),window.addEventListener("resize",this.onResponsiveInverted)},beforeDestroy:function(){window.removeEventListener("resize",this.onResponsiveInverted)},methods:Object(C["a"])({},Object(k["d"])(["setDrawer","toggleDrawer"]),{onResponsiveInverted:function(){window.innerWidth<991?this.responsive=!0:this.responsive=!1},onClickBtn:function(){this.setDrawer(!this.$store.state.drawer)}})},q=H,G=(n("d82c"),n("adda")),W=n("40fe"),J=n("f774"),K=Object(T["a"])(q,U,z,!1,null,null,null),Q=K.exports;x()(K,{VDivider:_["a"],VIcon:V["a"],VImg:G["a"],VLayout:a["a"],VList:I["a"],VListTile:O["a"],VListTileAction:W["a"],VListTileContent:D["a"],VListTileTitle:D["b"],VNavigationDrawer:J["a"],VSubheader:F["a"]});var X=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-fade-transition",{attrs:{mode:"out-in"}},[n("router-view")],1)},Y=[],Z={metaInfo:function(){return{title:"Celebration of Hope"}}},ee=Z,te=n("0789"),ne=Object(T["a"])(ee,X,Y,!1,null,null,null),oe=ne.exports;x()(ne,{VFadeTransition:te["b"]});var re=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-snackbar",{attrs:{bottom:"",vertical:"",timeout:3e3,color:e.color},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[e._v("\n  "+e._s(e.snack)+"\n  "),n("v-btn",{attrs:{flat:""},nativeOn:{click:function(t){e.show=!1}}},[e._v("Close")])],1)},ae=[],se={data:function(){return{show:!1,message:""}},computed:Object(C["a"])({},Object(k["e"])(["snack","color"])),methods:Object(C["a"])({},Object(k["d"])(["setSnack","setColor"])),watch:{snack:function(){var e=this.snack;""!==e&&(this.setColor("primary"),this.message=e,this.show=!0)},show:function(){!1===this.show&&this.setSnack("")}}},ce=se,ie=n("2db4"),ue=Object(T["a"])(ce,re,ae,!1,null,"4e13139c",null),le=ue.exports;x()(ue,{VBtn:A["a"],VSnackbar:ie["a"]});var de=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{persistent:"",fullscreen:"","content-class":"loading-dialog"},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[n("v-container",{attrs:{"fill-height":""}},[n("v-layout",{attrs:{row:"","justify-center":"","align-center":""}},[n("v-progress-circular",{attrs:{indeterminate:"",size:50,width:4,color:"accent"}})],1)],1)],1)},he=[],fe={computed:Object(C["a"])({},Object(k["e"])(["loading"]))},pe=fe,ve=n("a523"),ge=n("169a"),me=n("490a"),be=Object(T["a"])(pe,de,he,!1,null,"0cd8aa23",null),we=be.exports;x()(be,{VContainer:ve["a"],VDialog:ge["a"],VLayout:a["a"],VProgressCircular:me["a"]});var Ce={name:"App",components:{Navbar:$,Drawer:Q,ContentView:oe,Snackbar:le,Loading:we},data:function(){return{}},created:function(){this.$store.dispatch("tryAutoLogin")?(console.log("AugoLogin returned true"),this.$router.replace("dashboard")):this.$router.replace("/")}},ke=Ce,ye=(n("5c0b"),n("7496")),Se=Object(T["a"])(ke,g,m,!1,null,null,null),Te=Se.exports;x()(Se,{VApp:ye["a"]});var Le=n("41cb"),xe=n("c0d6");Object(v["sync"])(xe["a"],Le["a"]),o["a"].config.productionTip=!1,new o["a"]({router:Le["a"],store:xe["a"],render:function(e){return e(Te)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";var o=n("de55"),r=n.n(o);r.a},"5dfc":function(e,t,n){"use strict";var o=n("3b05"),r=n.n(o);r.a},6468:function(e,t,n){},"8a57":function(e,t,n){},b56c:function(e,t,n){},c0d6:function(e,t,n){"use strict";var o=n("f499"),r=n.n(o),a=(n("7f7f"),n("2b0e")),s=n("2f62"),c=function(e){return function(t,n){return t[e]=n}},i=function(e){return function(t){return t[e]=!t[e]}},u=n("bc3a"),l=n.n(u),d=l.a.create({baseURL:"https://etwl67dlx2.execute-api.ap-southeast-1.amazonaws.com/staging/v1/",withCredentials:!1}),h={authUser:function(e){return d.post("/login",{UserName:e.username,Password:e.password,returnSecureToken:!0})},fetchContacts:function(e){var t="";return e.AccessToken&&(t="/believers?AccessToken="+e.AccessToken),e.ChurchID&&(t+="&ChurchID="+e.ChurchID),d.get(t)},fetchChurches:function(e){return d.get("/churches",{params:e})},fetchContact:function(e){return d.get("/believer",{params:e})},updateContact:function(e){return console.log(e),d.post("/believer/status",e)},changePassword:function(e){return d.post("/change-password",e)},resetPassword:function(e){return d.post("/reset-password",e)}};a["a"].use(s["a"]);t["a"]=new s["a"].Store({state:{AccessToken:null,Role:null,FullName:null,Church:null,Contacts:null,Churches:null,ageGroups:{A:"6 yo and below",B:"7-12 yo",C:"13-16 yo",D:"17-25 yo",E:"26-35 yo",F:"36-49 yo",G:"50 yo and above"},rallyTime:{A:"Friday, 17 May 7:30PM (English)",B:"Saturday, 18 May 10:30AM (Children & Families)",C:"Saturday, 18 May 7:30PM (Chinese)",D:"Saturday, 18 May 7:30PM (Tamil)",E:"Sunday, 19 May 10:30AM (Filipino/English)",F:"Sunday, 19 May 2:00PM (Hindi)",G:"Sunday, 19 May 7:30PM (English)"},believerStatus:{1:{text:"pending",color:"warning lighten-1"},2:{text:"contacted",color:"success darken-1"},3:{text:"unreachable",color:"grey lighten-1"},4:{text:"reassign",color:"primary lighten-2"}},decisionText:{A:"Prayed and received Christ",B:"Rededicated",C:"Interested",D:"Like to join church"},drawer:null,drawerRight:null,isMobile:!1,loading:!1,snack:"",color:"success",image:"https://celebrationofhope.sg/wp-content/uploads/revslider/home-1-slider/brand-image-copy.jpg"},mutations:{authUser:function(e,t){e.AccessToken=t.token,e.Role=t.role,e.FullName=t.name,e.Church=t.church},clearAuthData:function(e){e.AccessToken=null,e.Role=null,e.FullName=null,e.Church=null},setContacts:function(e,t){e.Contacts=t},setChurches:function(e,t){e.Churches=t},updateContact:function(e,t){this.getters.getContactById(t.RandomID).BelieverStatus=t.BelieverStatus},setChurch:function(e,t){e.Church=t},setDrawer:c("drawer"),setDrawerRight:c("drawerRight"),toggleDrawerRight:i("drawerRight"),setImage:c("image"),setColor:c("color"),setSnack:c("snack"),setLoading:c("loading"),setMobile:c("isMobile"),toggleDrawer:i("drawer"),toggleLoading:i("loading"),toggleSnack:i("snack")},actions:{setLogoutTimer:function(e,t){var n=e.dispatch;setTimeout(function(){n("logout")},1e3*t)},resetPassword:function(e,t){var n=e.commit;return n("setLoading",!0),n("setSnack","Checking if that is a valid username"),h.resetPassword(t).then(function(e){return n("setSnack","Instructions to reset your password have been sent to your email"),e}).catch(function(e){return n("setSnack","Sorry, that is not a valid username. Perhaps check your typing?"),e})},changePassword:function(e,t){var n=e.commit,o=e.state;n("setLoading",!0),n("setSnack","Changing Password");var r={AccessToken:o.AccessToken,OldPassword:t.OldPassword,NewPassword:t.NewPassword};return h.changePassword(r).then(function(e){return n("setSnack","Password Changed"),e}).catch(function(e){return n("setSnack","Error: Password could not be changed"),e})},authUser:function(e,t){var n=e.commit,o=e.dispatch;return n("setLoading",!0),n("setSnack","Authenticating User"),h.authUser(t).then(function(e){var t={token:e.data.AccessToken,role:e.data.Role,name:e.data.FullName,church:e.data.Church};n("authUser",t),n("setLoading",!1),n("setSnack","User Authenticated");var a=new Date,s=new Date(a.getTime()+36e5);return localStorage.setItem("token",e.data.AccessToken),localStorage.setItem("role",e.data.Role),localStorage.setItem("name",e.data.FullName),localStorage.setItem("church",r()(e.data.Church)),localStorage.setItem("expireDate",s),o("setLogoutTimer",3600),e}).catch(function(e){return n("setLoading",!1),n("setSnack","Failed to login. Check your password or username"),e})},tryAutoLogin:function(e){var t=e.commit,n=localStorage.getItem("token");if(n){var o=localStorage.getItem("expireDate"),r=new Date;if(r>=o)return console.log("AutoLogin session has expired"),localStorage.clear(),!1;var a={token:n,role:localStorage.getItem("role"),name:localStorage.getItem("name"),church:JSON.parse(localStorage.getItem("church"))};return console.log("tryAutoLogin valid token found"),t("authUser",a),!0}return console.log("AutoLogin failed"),!1},setChurch:function(e,t){var n=e.commit;n("setChurch",t)},logout:function(e){var t=e.commit;t("clearAuthData"),localStorage.clear(),t("setSnack","Logging out")},updateContact:function(e,t){var n=e.commit,o=e.state,r={AccessToken:o.AccessToken,BelieverID:t.BelieverID,ChurchID:t.ChurchID,BelieverStatus:t.BelieverStatus,ChangeLog:t.ChangeLog};console.log(r),h.updateContact(r).then(function(e){console.log(e),n("setSnack","Contact Saved")}).catch(function(e){return console.log(e)})},fetchContact:function(e,t){var n=e.state;console.log(t);var o={AccessToken:n.AccessToken,BelieverID:t};return h.fetchContact(o).then(function(e){return console.log("In Fetch Contact (History)",e.data),e.data}).catch(function(e){return console.log(e)})},fetchContacts:function(e,t){var n=e.commit,o=e.state,r="";return console.log(t),o.AccessToken?("church-admin"===o.Role?r={AccessToken:o.AccessToken}:(r={AccessToken:o.AccessToken,ChurchID:t},console.log("Super-admin fetching contacts")),h.fetchContacts(r).then(function(e){console.log("In Fetch Contacts service",e.data);var t=e.data,o=[];for(var r in t){var a=t[r];a.id=r,o.push(a)}return n("setContacts",o),e}).catch(function(e){return console.log(e)})):void 0},fetchChurches:function(e){var t=e.state,n=e.commit;if(t.AccessToken)return h.fetchChurches({AccessToken:t.AccessToken}).then(function(e){var t=e.data,o=[];function r(e,t){return e+t}for(var a in t){var s=t[a];s.id=a,s.TotalLeaders=[s.EnglishLeaderSize,s.FilipinoLeaderSize,s.HindiLeaderSize,s.IndonesianLeaderSize,s.MandarinLeaderSize,s.TamilLeaderSize].reduce(r),s.TotalEnquirers=[s.Stat.StatusOneCount,s.Stat.StatusTwoCount,s.Stat.StatusThreeCount,s.Stat.StatusFourCount].reduce(r),o.push(s)}return n("setChurches",o),o}).catch(function(e){return console.log(e)})}},getters:{AccessToken:function(e){return e.AccessToken},Church:function(e){return e.Church},Role:function(e){return e.Role},isAuthenticated:function(e){return null!==e.AccessToken},Contacts:function(e){return e.Contacts},FullName:function(e){return e.FullName}}})},d82c:function(e,t,n){"use strict";var o=n("6468"),r=n.n(o);r.a},de55:function(e,t,n){}});
//# sourceMappingURL=app.9e8e9945.js.map